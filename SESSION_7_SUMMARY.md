# üìù –°–µ—Å—Å–∏—è 7: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Interactive Script

**–î–∞—Ç–∞:** 2025-10-17  
**–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~30 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

## üéØ –¶–µ–ª—å —Å–µ—Å—Å–∏–∏

–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º `scripts/interactive_demo.sh`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–ª "connection error" –¥–ª—è health checks, —Ö–æ—Ç—è curl –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é —Ä–∞–±–æ—Ç–∞–ª–∏ –æ—Ç–ª–∏—á–Ω–æ.

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –°–∏–º–ø—Ç–æ–º—ã
```bash
# –í—Ä—É—á–Ω—É—é —Ä–∞–±–æ—Ç–∞–ª–æ:
TOKEN=$(gcloud auth print-identity-token)
curl -H "Authorization: Bearer $TOKEN" https://frontend-service-38390150695.us-central1.run.app/health
# –í–æ–∑–≤—Ä–∞—â–∞–ª–æ: {"status":"healthy"}

# –í —Å–∫—Ä–∏–ø—Ç–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ:
# –ü–æ–∫–∞–∑—ã–≤–∞–ª–æ: "‚ùå connection error" –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```

### –ü—Ä–∏—á–∏–Ω—ã

1. **–¢–æ–∫–µ–Ω –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è**: –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–∞–ª—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ –Ω–∞—á–∞–ª–µ —Å–∫—Ä–∏–ø—Ç–∞, –Ω–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
2. **–ü–ª–æ—Ö–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –°–∫—Ä–∏–ø—Ç –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª HTTP status code, —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å subshell**: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `$TOKEN` –º–æ–≥–ª–∞ —Ç–µ—Ä—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_token()`

```bash
get_token() {
    gcloud auth print-identity-token 2>/dev/null
}
```

### 2. –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ health checks

**–ë—ã–ª–æ:**
```bash
response=$(curl -s -m 10 -H "Authorization: Bearer $TOKEN" "$url/health" 2>/dev/null || echo "error")
```

**–°—Ç–∞–ª–æ:**
```bash
CURRENT_TOKEN=$(get_token)
http_code=$(curl -s -w "%{http_code}" -o /tmp/health_response.txt \
    -m 10 -H "Authorization: Bearer $CURRENT_TOKEN" "$url/health" 2>/dev/null)
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã –í–°–ï curl –∑–∞–ø—Ä–æ—Å—ã

- ‚úÖ Health checks (–æ–ø—Ü–∏—è 1)
- ‚úÖ Upload —Ñ–∞–π–ª–∞ (–æ–ø—Ü–∏—è 3)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–æ–ø—Ü–∏—è 3)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (–æ–ø—Ü–∏—è 3, 6)
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏—è 4)
- ‚úÖ –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á (–æ–ø—Ü–∏—è 5)
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≥–µ–Ω—Ç–µ (–æ–ø—Ü–∏—è 8)

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`scripts/test_health.sh`** - –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
2. **`BUGFIX_INTERACTIVE_SCRIPT.md`** - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
3. **`SESSION_7_SUMMARY.md`** - –†–µ–∑—é–º–µ —Å–µ—Å—Å–∏–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ ‚Üí –ü–æ—Å–ª–µ
- ‚ùå Health checks –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ ‚Üí ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ùå "connection error" ‚Üí ‚úÖ –†–µ–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å HTTP –∫–æ–¥–∞–º–∏
- 95% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ ‚Üí 98% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

## üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ –≤ interactive_demo.sh
2. ‚úÖ –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç test_health.sh
3. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å HTTP –∫–æ–¥–∞–º–∏
4. ‚úÖ –ù–∞–ø–∏—Å–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
5. ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω —Å—Ç–∞—Ç—É—Å –¥–æ v0.9.9

## üí° Best Practices

```bash
# ‚úÖ –û–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–∫–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
CURRENT_TOKEN=$(get_token)
curl -H "Authorization: Bearer $CURRENT_TOKEN" ...

# ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å HTTP –∫–æ–¥
http_code=$(curl -w "%{http_code}" -o /tmp/response.txt ...)

# ‚úÖ –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
if [ "$http_code" = "403" ]; then
    echo "‚ùå auth error (code: 403)"
fi
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –°–æ–∑–¥–∞—Ç—å E2E —Ç–µ—Å—Ç —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∞–π–ª–∞
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD (GitHub Actions)
3. –î–æ–±–∞–≤–∏—Ç—å monitoring

## üéä –ò—Ç–æ–≥

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!** Interactive script —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑—É–ø—Ä–µ—á–Ω–æ. **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –Ω–∞ 98%!**

---

**–ü—Ä–æ–µ–∫—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à—ë–Ω! üöÄ**
